<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Changing Tides</title>
    <link
      rel="icon"
      href="{{ url_for('static', filename='Images/icon.png') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='result.css') }}"
    />

    <style>
      div.widget {
        position: relative;
        width: 355px;
        height: 125px;
        margin: 150px auto;
        background-color: #fcfdfd;
        border-radius: 9px;
        padding: 25px;
        padding-right: 30px;
        box-shadow: 0px 31px 35px -26px #080c21;
      }

      div.left-panel {
      }

      div.date {
        font-size: 12px;
        font-weight: bold;
        color: rgba(0, 0, 0, 0.5);
      }

      div.city {
        font-size: 21px;
        font-weight: bold;
        text-transform: uppercase;
        padding-top: 5px;
        color: rgba(0, 0, 0, 0.7);
      }

      div.temp {
        font-size: 40px;
        color: rgba(0, 0, 0, 0.9);
        font-weight: 100;
      }

      div.panel {
        display: inline-block;
      }

      div.right-panel {
        position: absolute;
        float: right;
        top: 0;
        margin-top: 15px;
        padding-left: 10px;
      }
    </style>

    <style>
      .info-card {
        background-color: #052531;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        text-align: center;
      }

      .info-card h2 {
        color: white;
      }

      .info-card p {
        color: white;
        margin: 5px 0;
      }

      .info-container {
        display: flex;
        justify-content: space-evenly;
        flex-wrap: wrap;
        margin-top: 5%;
        padding: 1%;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/fontawesome.min.css"
      integrity="sha384-BY+fdrpOd3gfeRvTSMT+VUZmA728cfF9Z2G42xpaRkUGu2i3DyzpTURDo5A6CaLK"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='alert.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  </head>
  <body>
    <div class="container">
      <nav>
        <img
          src="{{ url_for('static', filename='Images/logo.png') }}"
          onclick="window.location.href='{{ url_for('home') }}'"
          class="logo"
        />
        <ul>
          <li>
            <i
              class="bi bi-box-arrow-right"
              style="
                color: white;
                padding-left: 2%;
                min-width: 60px;
                height: 60px;
                border-radius: 50%;
                font-size: 25px;
              "
              id="signout"
              title="Sign Out"
            ></i>
          </li>
        </ul>
      </nav>

      <div>
        <center><h1 style="color: white">Climatic  Inspection of {{city}} </h1></center>
      </div>

      <div class="info-container">
        <div class="info-card">
          <h2>Max Temperature</h2>
          <p>{{ max_t }}&deg;C</p>
        </div>

        <div class="info-card">
          <h2>Min Temperature</h2>
          <p>{{ min_t }}&deg;C</p>
        </div>

        <div class="info-card">
          <h2>Rainfall</h2>
          <p>{{ rain }}mm</p>
        </div>

        <div class="info-card">
          <h2>Air Quality Index (AQI)</h2>
          <p>{{ aqi }}(μg/m3)</p>
        </div>

        <div class="info-card">
          <h2>Sea Level</h2>
          <p>{{ sealevel }} M</p>
        </div>

        <div class="info-card">
          <h2>Ozone Hole Area</h2>
          <p>{{ ozone }} KM</p>
        </div>

      </div>
        <br />

        {% if display_charts %}
        <div >
          <center>
            <h1 style="color: white; margin-top: 4%; text-align: center">
              Graphical analysis
            </h1>
          </center>
        </div>





         
 




       


     
       



                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                    <!-- Maximum Temperature Chart -->
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                            <canvas id="maxTempChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>



                 
                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                   
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                      <canvas id="minTempChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>


                                   
                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                   
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                      <canvas id="aqiChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>


                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                   
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                      <canvas id="seaLevelChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>



                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                   
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                      <canvas id="ozoneChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>


                  <center>

                    <div
                    style="
                      background-color: #052531;
                      display: flex;
                      flex-wrap: wrap;
                      justify-content: space-between;
                      margin-top: 4%;
                 
                      box-sizing: border-box;
                      background-color: #f2f2f2;
                      width:50%;
                     
                    ">
                   
           
                    <div style="flex: 0 0 100%; box-sizing: border-box;">
                      <canvas id="rainfallChart"></canvas>
                    </div>
           
           
                  </div>
                         
                  </center>






 

                 















        <div>

       
       

   
          {% endif %}
        </div>
      </div>
    </div>



     






    <script>

      const maxTempXValues = [2020, {{year}}, 2099];
const maxTempYValues = [44.51737, {{max_t}}, 77.9180149];

new Chart("maxTempChart", {
  type: "bar",  
  data: {
    labels: maxTempXValues,
    datasets: [
      {
        backgroundColor: "#052531",  
        data: maxTempYValues,
      },
    ],
  },
  options: {
    title: {
      display: true,
      text: 'Maximum Temperature (Celsius)',
      fontStyle: 'bold',
    },
    legend: { display: false },
    scales: {
      yAxes: [{
        ticks: { min: 0, max: 100 },
        scaleLabel: {
          display: true,
          labelString: 'Temperature (Celsius)',
        },
      }],
      xAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'Year',
        },
      }],
    },
    tooltips: {
      enabled: false,  
    },
    hover: {
      mode: true,
    },
    animation: {
      onComplete: function () {
        var ctx = this.chart.ctx;
        ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
        ctx.fillStyle = "black";
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';

        this.data.datasets.forEach(function (dataset) {
          for (var i = 0; i < dataset.data.length; i++) {
            var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
            ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
          }
        });
      },
    },
  },
});



const minTempXValues = [2020, {{year}}, 2099];
const minTempYValues = [30.163015223775734, {{min_t}}, 43.2046];

new Chart("minTempChart", {
  type: "bar",  
  data: {
    labels: minTempXValues,
    datasets: [
      {
        backgroundColor: "#052531",  
        data: minTempYValues,
      },
    ],
  },
  options: {
    title: {
      display: true,
      text: 'Minumum Temperature (Celsius)',
      fontStyle: 'bold',
    },
    legend: { display: false },
    scales: {
      yAxes: [{
        ticks: { min: 0, max: 100 },
        scaleLabel: {
          display: true,
          labelString: 'Temperature (Celsius)',
        },
      }],
      xAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'Year',
        },
      }],
    },
    tooltips: {
      enabled: false,  
    },
    hover: {
      mode: true,
    },
    animation: {
      onComplete: function () {
        var ctx = this.chart.ctx;
        ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
        ctx.fillStyle = "black";
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';

        this.data.datasets.forEach(function (dataset) {
          for (var i = 0; i < dataset.data.length; i++) {
            var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
            ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
          }
        });
      },
    },
  },
});






  const aqiXValues = [2020, {{year}}, 2099];
 const aqiYValues = [196.77, {{aqi}}, 220.11871910024042];

new Chart("aqiChart", {
  type: "bar",  
  data: {
    labels: aqiXValues,
    datasets: [
      {
        backgroundColor: "#052531",  
        data: aqiYValues,
      },
    ],
  },
  options: {
    title: {
      display: true,
      text: 'Air Quality Index (μg/m3)',
      fontStyle: 'bold',
    },
    legend: { display: false },
    scales: {
      yAxes: [{
        ticks: { min: 190, max: 235 },
        scaleLabel: {
          display: true,
          labelString: 'Air Quality Index (μg/m3)',
        },
      }],
      xAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'Year',
        },
      }],
    },
    tooltips: {
      enabled: false,  
    },
    hover: {
      mode: true,
    },
    animation: {
      onComplete: function () {
        var ctx = this.chart.ctx;
        ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
        ctx.fillStyle = "black";
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';

        this.data.datasets.forEach(function (dataset) {
          for (var i = 0; i < dataset.data.length; i++) {
            var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
            ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
          }
        });
      },
    },
  },
});














   
const seaLevelXValues = [2020, {{year}}, 2099];
const seaLevelYValues = [204.5449895120464, {{sealevel}}, 206.9114480845873];
 
 new Chart("seaLevelChart", {
   type: "bar",  
   data: {
     labels: seaLevelXValues,
     datasets: [
       {
         backgroundColor: "#052531",  
         data: seaLevelYValues,
       },
     ],
   },
   options: {
     title: {
       display: true,
       text: 'Sea Level (in meters)',
       fontStyle: 'bold',
     },
     legend: { display: false },
     scales: {
       yAxes: [{
         ticks: { min: 204, max: 210 },
         scaleLabel: {
           display: true,
           labelString: 'Sea Level (meters)',
         },
       }],
       xAxes: [{
         scaleLabel: {
           display: true,
           labelString: 'Year',
         },
       }],
     },
     tooltips: {
       enabled: false,  
     },
     hover: {
       mode: true,
     },
     animation: {
       onComplete: function () {
         var ctx = this.chart.ctx;
         ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
         ctx.fillStyle = "black";
         ctx.textAlign = 'center';
         ctx.textBaseline = 'bottom';
 
         this.data.datasets.forEach(function (dataset) {
           for (var i = 0; i < dataset.data.length; i++) {
             var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
             ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
           }
         });
       },
     },
   },
 });
 





 const ozoneXValues = [2020, {{year}}, 2099];
 const ozoneYValues = [24150003.091906756, {{ozone}}, 29708543.086185645];
 new Chart("ozoneChart", {
   type: "bar",  
   data: {
     labels: ozoneXValues,
     datasets: [
       {
         backgroundColor: "#052531",  
         data: ozoneYValues,
       },
     ],
   },
   options: {
     title: {
       display: true,
       text: 'Ozone Layer Depletion (KM)',
       fontStyle: 'bold',
     },
     legend: { display: false },
     scales: {
       yAxes: [{
         ticks: { min: 24140000, max: 30000000 },
         scaleLabel: {
           display: true,
           labelString: 'Ozone Layer Depletion (KM)',
         },
       }],
       xAxes: [{
         scaleLabel: {
           display: true,
           labelString: 'Year',
         },
       }],
     },
     tooltips: {
       enabled: false,  
     },
     hover: {
       mode: true,
     },
     animation: {
       onComplete: function () {
         var ctx = this.chart.ctx;
         ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
         ctx.fillStyle = "black";
         ctx.textAlign = 'center';
         ctx.textBaseline = 'bottom';
 
         this.data.datasets.forEach(function (dataset) {
           for (var i = 0; i < dataset.data.length; i++) {
             var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
             ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
           }
         });
       },
     },
   },
 });
 
 
 

 
 
 const rainfallXValues = [2020, {{year}}, 2099];
 const rainfallYValues  = [78.34081137798493, {{rain}}, 103.9689999386332];
 new Chart("rainfallChart", {
   type: "bar",  
   data: {
     labels: rainfallXValues,
     datasets: [
       {
         backgroundColor: "#052531",  
         data: rainfallYValues,
       },
     ],
   },
   options: {
     title: {
       display: true,
       text: 'Rainfall(in mm)',
       fontStyle: 'bold',
     },
     legend: { display: false },
     scales: {
       yAxes: [{
         ticks: { min:45, max: 130 },
         scaleLabel: {
           display: true,
           labelString: 'Rainfall(in mm)',
         },
       }],
       xAxes: [{
         scaleLabel: {
           display: true,
           labelString: 'Year',
         },
       }],
     },
     tooltips: {
       enabled: false,  
     },
     hover: {
       mode: true,
     },
     animation: {
       onComplete: function () {
         var ctx = this.chart.ctx;
         ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, 'normal', Chart.defaults.global.defaultFontFamily);
         ctx.fillStyle = "black";
         ctx.textAlign = 'center';
         ctx.textBaseline = 'bottom';
 
         this.data.datasets.forEach(function (dataset) {
           for (var i = 0; i < dataset.data.length; i++) {
             var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
             ctx.fillText(dataset.data[i].toFixed(2), model.x, model.y - 5);
           }
         });
       },
     },
   },
 });
 
 

 
 













    </script>

    <script>

     



    </script>

   

    <script>
      let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
      let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));

      let signOut = document.getElementById("signout");
      let Signout = () => {
        sessionStorage.removeItem("user-creds");
        sessionStorage.removeItem("user-info");
        // Alert
        let icon = {
          success: '<span class="material-symbols-outlined">task_alt</span>',
        };

        const showToast = (
          message = "Sample Message",
          toastType = "info",
          duration = 5000
        ) => {
          if (!Object.keys(icon).includes(toastType)) toastType = "info";

          let box = document.createElement("div");
          box.classList.add("toast", `toast-${toastType}`);
          box.innerHTML = ` <div class="toast-content-wrapper">
                                          <div class="toast-icon">
                                          ${icon[toastType]}
                                          </div>
                                          <div class="toast-message">${message}</div>
                                          <div class="toast-progress"></div>
                                          </div>`;
          duration = duration || 5000;
          box.querySelector(".toast-progress").style.animationDuration = `${
            duration / 1000
          }s`;

          let toastAlready = document.body.querySelector(".toast");
          if (toastAlready) {
            toastAlready.remove();
          }

          document.body.appendChild(box);
        };

        showToast("Signed Out Successfully", "success", 5000);

        setTimeout(() => {
          window.location.href = "{{ url_for('index') }}";
        }, 3000);
      };
      let CheckCred = () => {
        if (!sessionStorage.getItem("user-creds"))
          window.location.href = "{{ url_for('index') }}";
      };
      window.addEventListener("load", CheckCred);
      signOut.addEventListener("click", Signout);
    </script>
  </body>
</html>